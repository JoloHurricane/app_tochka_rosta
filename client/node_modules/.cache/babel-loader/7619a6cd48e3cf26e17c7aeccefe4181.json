{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useCallback,useState,useContext}from'react';import M from'materialize-css';import{AuthContext}from'../context/AuthContext';import{Loader}from'../components/Loader';import{useHttp}from'../hooks/http.hook';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Documents(){var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request,loading=_useHttp.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),files=_useState4[0],setFiles=_useState4[1];var fetchCategories=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/documents-edit/documents-categories','GET',null);case 3:fetched=_context.sent;setCategories(fetched);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[request]);var fetchFiles=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var fetched;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return request('/api/documents-edit/files','GET',null);case 3:fetched=_context2.sent;setFiles(fetched);_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);})),[request]);useEffect(function(){fetchCategories();fetchFiles();},[fetchCategories,fetchFiles]);useEffect(function(){var elem=document.querySelector('.collapsible.expandable');var instance=M.Collapsible.init(elem,{accordion:false});if(loading){return/*#__PURE__*/_jsx(Loader,{});}var check=function check(){};});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col s12\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B\"}),/*#__PURE__*/_jsx(\"ul\",{class:\"collapsible expandable\",children:!loading&&categories.map(function(category,index){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"div\",{class:\"collapsible-header\",children:category.title}),/*#__PURE__*/_jsx(\"div\",{class:\"collapsible-body\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u0412\\u044B\\u0431\\u0438\\u0440\\u0438\\u0442\\u0435 \\u0444\\u0430\\u0439\\u043B \\u0434\\u043B\\u044F \\u0441\\u043A\\u0430\\u0447\\u0438\\u0432\\u0430\\u043D\\u0438\\u044F\"})}),files.filter(function(val){if(val.category===category._id){return val;}}).map(function(file,index){return/*#__PURE__*/_jsx(\"div\",{class:\"collapsible-body\",children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"a\",{download:true,href:\"/documents/\".concat(category.title,\"/\").concat(file.file),children:file.file})})});})]});})})]})})})});}export default Documents;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/Pages/Documents.js"],"names":["React","useEffect","useCallback","useState","useContext","M","AuthContext","Loader","useHttp","Documents","auth","request","loading","categories","setCategories","files","setFiles","fetchCategories","fetched","fetchFiles","elem","document","querySelector","instance","Collapsible","init","accordion","check","map","category","index","title","filter","val","_id","file"],"mappings":"qWAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,WAAxB,CAAoCC,QAApC,CAA6CC,UAA7C,KAA8D,OAA9D,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAAQC,MAAR,KAAqB,sBAArB,CACA,OAAQC,OAAR,KAAsB,oBAAtB,C,6IAEA,QAASC,CAAAA,SAAT,EAAoB,CAChB,GAAMC,CAAAA,IAAI,CAAGN,UAAU,CAACE,WAAD,CAAvB,CADgB,aAEWE,OAAO,EAFlB,CAETG,OAFS,UAETA,OAFS,CAEAC,OAFA,UAEAA,OAFA,eAGoBT,QAAQ,CAAC,EAAD,CAH5B,wCAGTU,UAHS,eAGGC,aAHH,8BAIUX,QAAQ,CAAC,EAAD,CAJlB,yCAITY,KAJS,eAIFC,QAJE,eAMhB,GAAMC,CAAAA,eAAe,CAAGf,WAAW,sEAAC,qLAERS,CAAAA,OAAO,CAAC,0CAAD,CAA6C,KAA7C,CAAoD,IAApD,CAFC,QAExBO,OAFwB,eAG9BJ,aAAa,CAACI,OAAD,CAAb,CAH8B,iJAAD,GAM9B,CAACP,OAAD,CAN8B,CAAnC,CAQE,GAAMQ,CAAAA,UAAU,CAAGjB,WAAW,sEAAC,4LAEHS,CAAAA,OAAO,CAAC,2BAAD,CAA8B,KAA9B,CAAqC,IAArC,CAFJ,QAEnBO,OAFmB,gBAGzBF,QAAQ,CAACE,OAAD,CAAR,CAHyB,uJAAD,GAK3B,CAACP,OAAD,CAL2B,CAA9B,CAOAV,SAAS,CAAC,UAAM,CACdgB,eAAe,GACfE,UAAU,GAEX,CAJQ,CAIN,CAACF,eAAD,CAAiBE,UAAjB,CAJM,CAAT,CAQFlB,SAAS,CAAC,UAAI,CAEV,GAAImB,CAAAA,IAAI,CAAGC,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAX,CACA,GAAIC,CAAAA,QAAQ,CAAGlB,CAAC,CAACmB,WAAF,CAAcC,IAAd,CAAmBL,IAAnB,CAAyB,CACxCM,SAAS,CAAE,KAD6B,CAAzB,CAAf,CAIJ,GAAId,OAAJ,CAAa,CACb,mBAAO,KAAC,MAAD,IAAP,CACD,CAED,GAAMe,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAI,CAEjB,CAFD,CAIG,CAfQ,CAAT,CAgBA,mBACI,sCACA,YAAK,SAAS,CAAC,WAAf,uBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,SAAf,wBAEI,8EAFJ,cAGI,WAAI,KAAK,CAAC,wBAAV,UACC,CAACf,OAAD,EAAYC,UAAU,CAACe,GAAX,CAAe,SAACC,QAAD,CAAUC,KAAV,CAAkB,CAC9C,mBACC,mCACI,YAAK,KAAK,CAAC,oBAAX,UAAiCD,QAAQ,CAACE,KAA1C,EADJ,cAEI,YAAK,KAAK,CAAC,kBAAX,uBAA+B,mLAA/B,EAFJ,CAGKhB,KAAK,CAACiB,MAAN,CAAa,SAACC,GAAD,CAAO,CACtB,GAAIA,GAAG,CAACJ,QAAJ,GAAeA,QAAQ,CAACK,GAA5B,CAAgC,CAC5B,MAAOD,CAAAA,GAAP,CACH,CACJ,CAJK,EAIHL,GAJG,CAIC,SAACO,IAAD,CAAML,KAAN,CAAc,CACjB,mBAAO,YAAK,KAAK,CAAC,kBAAX,uBAA8B,mCAAM,UAAG,QAAQ,KAAX,CAAY,IAAI,sBAAgBD,QAAQ,CAACE,KAAzB,aAAkCI,IAAI,CAACA,IAAvC,CAAhB,UAAgEA,IAAI,CAACA,IAArE,EAAN,EAA9B,EAAP,CACL,CANO,CAHL,GADD,CAcD,CAfc,CADb,EAHJ,GADJ,EADJ,EADA,EADJ,CAiCH,CAED,cAAe1B,CAAAA,SAAf","sourcesContent":["import React,{useEffect,useCallback,useState,useContext} from 'react'\r\nimport M from 'materialize-css'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport {Loader} from '../components/Loader'\r\nimport {useHttp} from '../hooks/http.hook'\r\n\r\nfunction Documents(){\r\n    const auth = useContext(AuthContext)\r\n    const {request, loading} = useHttp()\r\n    const [categories, setCategories] = useState([])\r\n    const [files, setFiles] = useState([])\r\n\r\n    const fetchCategories = useCallback(async () => {\r\n        try {\r\n          const fetched = await request('/api/documents-edit/documents-categories', 'GET', null)\r\n          setCategories(fetched)\r\n       \r\n        } catch (e) {}\r\n      }, [request])\r\n\r\n      const fetchFiles = useCallback(async () => {\r\n        try {\r\n            const fetched = await request('/api/documents-edit/files', 'GET', null)\r\n            setFiles(fetched)\r\n        } catch (e) {}\r\n      }, [request])\r\n      \r\n      useEffect(() => {\r\n        fetchCategories()\r\n        fetchFiles()\r\n      \r\n      }, [fetchCategories,fetchFiles])\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n        \r\n        var elem = document.querySelector('.collapsible.expandable');\r\n        var instance = M.Collapsible.init(elem, {\r\n        accordion: false\r\n});\r\n    \r\n    if (loading) {\r\n    return <Loader/>\r\n  }\r\n\r\n  const check = ()=>{\r\n      \r\n  }\r\n            \r\n    })\r\n    return(\r\n        <>\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    {/* <a href=\"/images/articles/text.txt\" rel=\"noopener\" download>ssss</a> */}\r\n                    <h3>Документы</h3>\r\n                    <ul class=\"collapsible expandable\">\r\n                    {!loading && categories.map((category,index)=>{\r\n                    return(\r\n                     <li>\r\n                         <div class=\"collapsible-header\">{category.title}</div>\r\n                         <div class=\"collapsible-body\" ><span>Выбирите файл для скачивания</span></div>\r\n                         {files.filter((val)=>{\r\n                        if (val.category===category._id){\r\n                            return val\r\n                        } \r\n                    }).map((file,index)=>{\r\n                        return(<div class=\"collapsible-body\"><span><a download href={`/documents/${category.title}/${file.file}`}>{file.file}</a></span></div>)\r\n                  })}\r\n                            \r\n                     </li> \r\n                    )\r\n                  })}\r\n\r\n                       \r\n                </ul>\r\n                </div>\r\n            </div>\r\n           \r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Documents"]},"metadata":{},"sourceType":"module"}