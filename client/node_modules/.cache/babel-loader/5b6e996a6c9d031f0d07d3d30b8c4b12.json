{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useCallback,useState,useContext}from'react';import M from'materialize-css';import{AuthContext}from'../context/AuthContext';import{Loader}from'../components/Loader';import{useHttp}from'../hooks/http.hook';import{useMessage}from\"../hooks/message.hook\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Events(){var auth=useContext(AuthContext);var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request,clearError=_useHttp.clearError;var message=useMessage();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),events=_useState2[0],setEvents=_useState2[1];useEffect(function(){var elems=document.querySelectorAll('.parallax');var instances=M.Parallax.init(elems);});useEffect(function(){message(error);clearError();},[error,message,clearError]);var fetchEvents=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/events-edit/events','GET',null);case 3:fetched=_context.sent;setEvents(fetched);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[request]);useEffect(function(){fetchEvents();},[fetchEvents]);if(loading){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:\"#000\",position:\"relative\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"parallax-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"parallax\",children:/*#__PURE__*/_jsx(\"img\",{className:\"\",alt:\"asd\",src:\"/images/event3.jpg\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"big-title color white-text center-align\",children:\"\\u041F\\u0440\\u0435\\u0434\\u0441\\u0442\\u043E\\u044F\\u0449\\u0438\\u0435 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u044F\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col s12\",children:[/*#__PURE__*/_jsx(\"h3\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"table col s12 m10 offset-m2 \",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:!loading&&events.map(function(event,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:event.title}),/*#__PURE__*/_jsx(\"td\",{children:event.createdAt}),/*#__PURE__*/_jsx(\"td\",{children:event.createdEnd})]},index);})})]})})]})})})]});}export default Events;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/Pages/Events.js"],"names":["React","useEffect","useCallback","useState","useContext","M","AuthContext","Loader","useHttp","useMessage","Link","Events","auth","loading","error","request","clearError","message","events","setEvents","elems","document","querySelectorAll","instances","Parallax","init","fetchEvents","fetched","backgroundColor","position","map","event","index","title","createdAt","createdEnd"],"mappings":"qWAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,WAAxB,CAAoCC,QAApC,CAA6CC,UAA7C,KAA8D,OAA9D,CACA,MAAOC,CAAAA,CAAP,KAAc,iBAAd,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAAQC,MAAR,KAAqB,sBAArB,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,OAAQC,UAAR,KAAyB,uBAAzB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,C,6IAEA,QAASC,CAAAA,MAAT,EAAiB,CACb,GAAMC,CAAAA,IAAI,CAAGR,UAAU,CAACE,WAAD,CAAvB,CADa,aAE8BE,OAAO,EAFrC,CAENK,OAFM,UAENA,OAFM,CAEEC,KAFF,UAEEA,KAFF,CAEQC,OAFR,UAEQA,OAFR,CAEgBC,UAFhB,UAEgBA,UAFhB,CAGb,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAHa,cAIeN,QAAQ,CAAC,EAAD,CAJvB,wCAINe,MAJM,eAIEC,SAJF,eAOblB,SAAS,CAAC,UAAI,CAEV,GAAImB,CAAAA,KAAK,CAAGC,QAAQ,CAACC,gBAAT,CAA0B,WAA1B,CAAZ,CACA,GAAIC,CAAAA,SAAS,CAAGlB,CAAC,CAACmB,QAAF,CAAWC,IAAX,CAAgBL,KAAhB,CAAhB,CACH,CAJQ,CAAT,CAKAnB,SAAS,CAAC,UAAI,CACJgB,OAAO,CAACH,KAAD,CAAP,CACAE,UAAU,GACX,CAHA,CAGC,CAACF,KAAD,CAAOG,OAAP,CAAeD,UAAf,CAHD,CAAT,CAMQ,GAAMU,CAAAA,WAAW,CAAGxB,WAAW,sEAAC,qLAEAa,CAAAA,OAAO,CAAC,yBAAD,CAA4B,KAA5B,CAAmC,IAAnC,CAFP,QAEhBY,OAFgB,eAGtBR,SAAS,CAACQ,OAAD,CAAT,CAHsB,iJAAD,GAO5B,CAACZ,OAAD,CAP4B,CAA/B,CASAd,SAAS,CAAC,UAAM,CACdyB,WAAW,GAEZ,CAHQ,CAGN,CAACA,WAAD,CAHM,CAAT,CAKR,GAAIb,OAAJ,CAAa,CACb,mBAAO,KAAC,MAAD,IAAP,CACD,CAIC,mBACI,wCACA,aAAK,KAAK,CAAE,CAACe,eAAe,CAAC,MAAjB,CAAwBC,QAAQ,CAAC,UAAjC,CAAZ,wBAEQ,YAAK,SAAS,CAAC,oBAAf,uBACQ,YAAK,SAAS,CAAC,UAAf,uBAA0B,YAAK,SAAS,CAAC,EAAf,CAAkB,GAAG,CAAC,KAAtB,CAA4B,GAAG,CAAC,oBAAhC,EAA1B,EADR,EAFR,cAMY,WAAM,SAAS,CAAC,yCAAhB,2HANZ,GADA,cASA,YAAK,SAAS,CAAC,WAAf,uBACI,YAAK,SAAS,CAAC,KAAf,uBACI,aAAK,SAAS,CAAC,SAAf,wBAEI,aAFJ,cAGW,YAAK,SAAS,CAAC,8BAAf,uBACX,sCACR,oCACE,mCACI,wEADJ,cAEI,qFAFJ,cAGI,uGAHJ,cAII,aAJJ,cAKI,aALJ,GADF,EADQ,cAWR,uBACC,CAAChB,OAAD,EAAYK,MAAM,CAACY,GAAP,CAAW,SAACC,KAAD,CAAOC,KAAP,CAAe,CAC3B,mBACE,mCACE,oBAAKD,KAAK,CAACE,KAAX,EADF,cAEE,oBAAKF,KAAK,CAACG,SAAX,EAFF,cAGE,oBAAKH,KAAK,CAACI,UAAX,EAHF,GAASH,KAAT,CADF,CAQD,CATE,CADb,EAXQ,GADW,EAHX,GADJ,EADJ,EATA,GADJ,CAiDH,CAED,cAAerB,CAAAA,MAAf","sourcesContent":["import React,{useEffect,useCallback,useState,useContext} from 'react'\r\nimport M from 'materialize-css'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport {Loader} from '../components/Loader'\r\nimport {useHttp} from '../hooks/http.hook'\r\nimport {useMessage} from \"../hooks/message.hook\"\r\nimport {Link} from 'react-router-dom'\r\n\r\nfunction Events(){\r\n    const auth = useContext(AuthContext)\r\n    const {loading,error,request,clearError} = useHttp()\r\n    const message = useMessage()\r\n    const [events, setEvents] = useState([])\r\n     \r\n  \r\n    useEffect(()=>{\r\n    \r\n        var elems = document.querySelectorAll('.parallax');\r\n        var instances = M.Parallax.init(elems, );\r\n    },)\r\n    useEffect(()=>{\r\n              message(error)\r\n              clearError()\r\n            },[error,message,clearError])\r\n\r\n    \r\n            const fetchEvents = useCallback(async () => {\r\n                try {\r\n                      const fetched = await request('/api/events-edit/events', 'GET', null)\r\n                      setEvents(fetched)\r\n                      \r\n                     \r\n              } catch (e) {}\r\n            }, [request])\r\n            \r\n            useEffect(() => {\r\n              fetchEvents()\r\n              \r\n            }, [fetchEvents])  \r\n\r\n    if (loading) {\r\n    return <Loader/>\r\n  }\r\n\r\n  \r\n    \r\n    return(\r\n        <>\r\n        <div style={{backgroundColor:\"#000\",position:\"relative\"}}>\r\n   \r\n                <div className=\"parallax-container\">\r\n                        <div className=\"parallax\"><img className=\"\" alt=\"asd\" src=\"/images/event3.jpg\"></img></div>\r\n                    \r\n                    </div>\r\n                    <h2   className=\"big-title color white-text center-align\">Предстоящие события</h2> \r\n         </div>\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col s12\">\r\n                    \r\n                    <h3></h3>\r\n                           <div className=\"table col s12 m10 offset-m2 \">\r\n                <table>\r\n        <thead>\r\n          <tr>\r\n              <th>Название</th>\r\n              <th>Дата начала</th>\r\n              <th>Дата окончания</th>\r\n              <th></th>\r\n              <th></th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        {!loading && events.map((event,index)=>{\r\n                    return(\r\n                      <tr key={index}>\r\n                        <td>{event.title}</td>\r\n                        <td>{event.createdAt}</td>\r\n                        <td>{event.createdEnd}</td>\r\n                       \r\n                      </tr>\r\n                    )\r\n                  })}\r\n         \r\n         \r\n        </tbody>\r\n      </table>\r\n                </div>\r\n                </div>\r\n            </div>\r\n           \r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Events"]},"metadata":{},"sourceType":"module"}