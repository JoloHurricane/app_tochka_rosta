{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useCallback}from'react';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';import Navbar from'./components/Navbar';import Footer from\"./components/Footer\";import{Loader}from\"./components/Loader\";import Home from\"./Pages/Home\";import Articles from'./Pages/Articles';import\"./materialize.css\";import M from'materialize-css';import'./App.css';import ArticleContent from'./Pages/ArticleContent';import GalleryPage from'./Pages/GalleryPage';import GalleryContent from'./Pages/GalleryContent';import{AuthContext}from'./context/AuthContext';import{useAuth}from\"./hooks/auth.hook\";import Login from'./Pages/Login';import Documents from'./Pages/Documents';import{useRoutesAdm}from\"./routesAdm\";import ContactPage from\"./Pages/ContactPage\";import AboutPage from\"./Pages/AboutPage\";import NotFound from\"./Pages/NotFound\";import{useHttp}from\"./hooks/http.hook\";import{useMessage}from\"./hooks/message.hook\";import Events from\"./Pages/Events\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function App(){var _useAuth=useAuth(),token=_useAuth.token,login=_useAuth.login,logout=_useAuth.logout,userId=_useAuth.userId,ready=_useAuth.ready;var isAuthenticated=!!token;var routesAdm=useRoutesAdm(isAuthenticated);var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request,clearError=_useHttp.clearError;var message=useMessage();var _useState=useState({title:'',address:'',phone:'',phoneAdditional:'',email:'',_id:'',city:'',map:'',vk:'',instagram:'',facebook:'',telegram:''}),_useState2=_slicedToArray(_useState,2),organization=_useState2[0],setOrganization=_useState2[1];var fetchOrg=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/organization-edit/organization','POST',_objectSpread({},organization),{},'application/json');case 3:fetched=_context.sent;setOrganization(_objectSpread({},fetched));_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[request]);useEffect(function(){fetchOrg();},[fetchOrg]);if(!ready){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{token:token,login:login,logout:logout,userId:userId,isAuthenticated:isAuthenticated,ready:ready},children:/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsxs(\"main\",{id:\"main\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/gallery/:id\",exact:true,component:GalleryContent}),/*#__PURE__*/_jsx(Route,{path:\"/articles/:id\",component:ArticleContent}),/*#__PURE__*/_jsx(Route,{path:\"/gallery\",exact:true,component:GalleryPage}),/*#__PURE__*/_jsx(Route,{path:\"/events\",exact:true,component:Events}),/*#__PURE__*/_jsx(Route,{path:\"/articles\",exact:true,component:Articles}),/*#__PURE__*/_jsx(Route,{path:\"/documents\",exact:true,component:Documents}),/*#__PURE__*/_jsx(Route,{path:\"/contacts\",exact:true,component:ContactPage}),/*#__PURE__*/_jsx(Route,{path:\"/about\",exact:true,component:AboutPage}),/*#__PURE__*/_jsx(Route,{path:\"/login\",exact:true,component:Login}),/*#__PURE__*/_jsx(Route,{path:\"/\",exact:true,component:Home}),routesAdm,/*#__PURE__*/_jsx(Route,{exact:true,component:NotFound})]}),/*#__PURE__*/_jsx(Switch,{})]}),/*#__PURE__*/_jsx(Footer,{organization:organization})]})})});}export default App;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/App.js"],"names":["React","useEffect","useState","useCallback","BrowserRouter","Router","Switch","Route","Navbar","Footer","Loader","Home","Articles","M","ArticleContent","GalleryPage","GalleryContent","AuthContext","useAuth","Login","Documents","useRoutesAdm","ContactPage","AboutPage","NotFound","useHttp","useMessage","Events","App","token","login","logout","userId","ready","isAuthenticated","routesAdm","loading","error","request","clearError","message","title","address","phone","phoneAdditional","email","_id","city","map","vk","instagram","facebook","telegram","organization","setOrganization","fetchOrg","fetched"],"mappings":"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","sourcesContent":["import React,{useEffect,useState,useCallback} from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\nimport Navbar from './components/Navbar';\nimport Footer from \"./components/Footer\"\nimport {Loader} from \"./components/Loader\"\nimport Home from \"./Pages/Home\"\nimport Articles from './Pages/Articles'\nimport \"./materialize.css\"\nimport M from 'materialize-css'\nimport './App.css';\nimport ArticleContent from './Pages/ArticleContent';\nimport GalleryPage from './Pages/GalleryPage';\nimport GalleryContent from './Pages/GalleryContent';\nimport { AuthContext } from './context/AuthContext';\nimport {useAuth} from \"./hooks/auth.hook\"\nimport Login from './Pages/Login';\nimport Documents from './Pages/Documents'\nimport {useRoutesAdm} from \"./routesAdm\";\nimport ContactPage from \"./Pages/ContactPage\"\nimport AboutPage from \"./Pages/AboutPage\"\nimport NotFound from \"./Pages/NotFound\"\nimport {useHttp} from \"./hooks/http.hook\" \nimport {useMessage} from \"./hooks/message.hook\"\nimport Events from \"./Pages/Events\"\n\nfunction App() {\n\n\n  const {token,login,logout,userId,ready} = useAuth() \n    const isAuthenticated=!!token\n    const routesAdm = useRoutesAdm(isAuthenticated)\n    const {loading,error,request,clearError} = useHttp()\n    const message = useMessage()\n    const [organization,setOrganization] = useState({\n      title:'',\n      address:'',\n      phone:'',\n      phoneAdditional:'',\n      email:'',\n      _id:'',\n      city:'',\n      map:'',\n      vk:'',\n      instagram:'',\n      facebook:'',\n      telegram:''\n    })\n\n    const fetchOrg = useCallback(async () => {\n      try {\n          const fetched = await request('/api/organization-edit/organization', \n          'POST', {...organization},{},'application/json')\n          setOrganization({...fetched})\n         \n         \n  } catch (e) {}\n}, [request])\n\nuseEffect(() => {\n  fetchOrg()\n  \n}, [fetchOrg]) \n\n    if(!ready){\n      return <Loader/>\n  }\n  \n  return (\n    <AuthContext.Provider value={\n      {\n          token,login,logout,userId,isAuthenticated,ready\n      }\n  }>\n    <>\n     \n      <Router>\n      <main id='main'>\n        <Navbar />\n        \n        \n        <Switch>\n         \n         <Route path=\"/gallery/:id\" exact component={GalleryContent}/>\n          <Route path=\"/articles/:id\"  component={ArticleContent}/>\n          <Route path=\"/gallery\" exact component={GalleryPage}/>\n          <Route path=\"/events\" exact component={Events}/>\n          <Route path=\"/articles\" exact component={Articles}/>\n          <Route path=\"/documents\" exact component={Documents}/>\n          <Route path=\"/contacts\" exact component={ContactPage}/>\n          <Route path=\"/about\" exact component={AboutPage}/>\n          <Route path=\"/login\" exact component={Login}/> \n          <Route path='/' exact component={Home} />\n          {routesAdm}\n          <Route  exact component={NotFound} />\n        \n        </Switch>\n        \n          \n       <Switch>\n         \n     \n       </Switch>\n      \n      \n       \n        </main>\n       \n     <Footer organization={organization}/>\n    \n       \n      </Router>\n      \n     \n   \n      \n    \n    </>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}