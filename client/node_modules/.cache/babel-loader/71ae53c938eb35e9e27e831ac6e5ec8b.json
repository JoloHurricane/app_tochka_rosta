{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _createForOfIteratorHelper from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from'react';import{AuthContext}from'../context/AuthContext';import{useHttp}from\"../hooks/http.hook\";import{useMessage}from\"../hooks/message.hook\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Upload(){var auth=useContext(AuthContext);var message=useMessage();var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request,clearError=_useHttp.clearError;function submitHandler(event){event.preventDefault();}var _useState=useState(),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var handleImageChange=function handleImageChange(e){e.preventDefault();var files=e.target.files;setFiles(files);};var uploadHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dataForm,_iterator,_step,f,_iterator2,_step2,_step2$value,key,value,imgdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dataForm=new FormData();_iterator=_createForOfIteratorHelper(files);try{for(_iterator.s();!(_step=_iterator.n()).done;){f=_step.value;dataForm.append(\"files\",f);}}catch(err){_iterator.e(err);}finally{_iterator.f();}_iterator2=_createForOfIteratorHelper(dataForm);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){_step2$value=_slicedToArray(_step2.value,2),key=_step2$value[0],value=_step2$value[1];}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}_context.next=8;return request('/api/upload','POST',dataForm,{});case 8:imgdata=_context.sent;message(imgdata.message);_context.next=14;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function uploadHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"adm-form col s12 m12\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,method:\"post\",enctype:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"col s8 offset-s4\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field label-file-input col s3 offset-s2  m6 offset-m5  l1 offset-l4\",children:/*#__PURE__*/_jsx(\"label\",{for:\"file\",children:\"\\u0424\\u0430\\u0439\\u043B\\u044B\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field label-file-input col s2 m6 offset-m5  l4\",children:/*#__PURE__*/_jsx(\"input\",{onChange:handleImageChange,type:\"file\",id:\"files\",name:\"files\",multiple:true})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s3 offset-s3  m2 offset-m4  l1 offset-l4  btn-form\",children:/*#__PURE__*/_jsx(\"button\",{onClick:uploadHandler,type:\"submit\",className:\"btn green waves-effect waves-light\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"})})})]})})})});}export default Upload;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/components/Upload.js"],"names":["React","useEffect","useContext","useState","AuthContext","useHttp","useMessage","Upload","auth","message","loading","error","request","clearError","submitHandler","event","preventDefault","files","setFiles","handleImageChange","e","target","uploadHandler","dataForm","FormData","f","append","key","value","imgdata"],"mappings":"qfAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAAyBC,UAAzB,CAAoCC,QAApC,KAAmD,OAAnD,CACA,OAASC,WAAT,KAA4B,wBAA5B,CACA,OAAQC,OAAR,KAAsB,oBAAtB,CACA,OAAQC,UAAR,KAAyB,uBAAzB,C,6IAEA,QAASC,CAAAA,MAAT,EAAiB,CACb,GAAMC,CAAAA,IAAI,CAAGN,UAAU,CAACE,WAAD,CAAvB,CACA,GAAMK,CAAAA,OAAO,CAAGH,UAAU,EAA1B,CAFa,aAG8BD,OAAO,EAHrC,CAGNK,OAHM,UAGNA,OAHM,CAGEC,KAHF,UAGEA,KAHF,CAGQC,OAHR,UAGQA,OAHR,CAGgBC,UAHhB,UAGgBA,UAHhB,CAIb,QAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA6B,CACzBA,KAAK,CAACC,cAAN,GACH,CANY,cAQYb,QAAQ,EARpB,wCAQNc,KARM,eAQAC,QARA,eAWb,GAAMC,CAAAA,iBAAiB,CAAE,QAAnBA,CAAAA,iBAAmB,CAAAC,CAAC,CAAG,CACzBA,CAAC,CAACJ,cAAF,GACC,GAAMC,CAAAA,KAAK,CAAGG,CAAC,CAACC,MAAF,CAASJ,KAAvB,CACAC,QAAQ,CAACD,KAAD,CAAR,CACD,CAJJ,CAMA,GAAMK,CAAAA,aAAa,0FAAE,mOAETC,QAFS,CAEE,GAAIC,CAAAA,QAAJ,EAFF,sCAGCP,KAHD,MAGf,+CAAsB,CAAXQ,CAAW,aACpBF,QAAQ,CAACG,MAAT,CAAgB,OAAhB,CAAyBD,CAAzB,EACD,CALc,2FAMUF,QANV,MAMf,kDAAkC,6CAAvBI,GAAuB,iBAAnBC,KAAmB,iBACjC,CAPc,6EAWShB,CAAAA,OAAO,CAAC,aAAD,CAAe,MAAf,CAAsBW,QAAtB,CAC7B,EAD6B,CAXhB,QAWPM,OAXO,eAabpB,OAAO,CAACoB,OAAO,CAACpB,OAAT,CAAP,CAba,sJAAF,kBAAba,CAAAA,aAAa,0CAAnB,CAoBA,mBACI,sCACK,YAAK,SAAS,CAAC,KAAf,uBAED,YAAK,SAAS,CAAC,sBAAf,uBAEI,cAAM,QAAQ,CAAER,aAAhB,CAA+B,MAAM,CAAC,MAAtC,CAA6C,OAAO,CAAC,qBAArD,wBAEA,aAAK,KAAK,CAAC,KAAX,wBACA,WAAI,SAAS,CAAC,kBAAd,mGADA,cAKI,YAAK,SAAS,CAAC,2EAAf,uBACI,cAAO,GAAG,CAAC,MAAX,4CADJ,EALJ,cASI,YAAK,SAAS,CAAC,sDAAf,uBAEI,cAAO,QAAQ,CAAEK,iBAAjB,CAAoC,IAAI,CAAC,MAAzC,CAAgD,EAAE,CAAC,OAAnD,CAA2D,IAAI,CAAC,OAAhE,CAAwE,QAAQ,KAAhF,EAFJ,EATJ,GAFA,cAgBK,YAAK,SAAS,CAAC,KAAf,uBACD,YAAM,SAAS,CAAC,oEAAhB,uBACI,eAAQ,OAAO,CAAEG,aAAjB,CAAgC,IAAI,CAAC,QAArC,CAA8C,SAAS,CAAC,oCAAxD,oEADJ,EADC,EAhBL,GAFJ,EAFC,EADL,EADJ,CAkCH,CACD,cAAef,CAAAA,MAAf","sourcesContent":["import React ,{useEffect,useContext,useState} from 'react'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport {useHttp} from \"../hooks/http.hook\" \r\nimport {useMessage} from \"../hooks/message.hook\"\r\n\r\nfunction Upload(){\r\n    const auth = useContext(AuthContext)\r\n    const message = useMessage()\r\n    const {loading,error,request,clearError} = useHttp()\r\n    function submitHandler(event){\r\n        event.preventDefault()\r\n    }\r\n\r\n    const [files,setFiles] = useState()\r\n\r\n    \r\n    const handleImageChange= e=> {\r\n        e.preventDefault();\r\n         const files = e.target.files\r\n         setFiles(files)\r\n       }\r\n\r\n    const uploadHandler= async ()=>{\r\n        try{\r\n          const dataForm = new FormData()\r\n          for (const f of files){\r\n            dataForm.append(\"files\", f)\r\n          }\r\n          for(const [key,value] of dataForm){\r\n          }\r\n       \r\n          \r\n        \r\n            const imgdata = await request('/api/upload','POST',dataForm, \r\n            {},)\r\n            message(imgdata.message)\r\n          \r\n          \r\n        }catch(e){\r\n           \r\n        }\r\n    }\r\n    return(\r\n        <>\r\n             <div className=\"row\">\r\n            \r\n            <div className=\"adm-form col s12 m12\">\r\n           \r\n                <form onSubmit={submitHandler} method=\"post\" enctype=\"multipart/form-data\">\r\n               \r\n                <div class=\"row\">\r\n                <h4 className=\"col s8 offset-s4\">Загрузка файлов</h4>\r\n               \r\n                    \r\n                   \r\n                    <div className=\"input-field label-file-input col s3 offset-s2  m6 offset-m5  l1 offset-l4\">\r\n                        <label for=\"file\">Файлы</label>\r\n                      \r\n                    </div>\r\n                    <div className=\"input-field label-file-input col s2 m6 offset-m5  l4\">\r\n                     \r\n                        <input onChange={handleImageChange} type=\"file\" id=\"files\" name=\"files\" multiple/>\r\n                    </div>\r\n                     </div>\r\n                     <div className=\"row\">\r\n                    <div  className=\"input-field col s3 offset-s3  m2 offset-m4  l1 offset-l4  btn-form\">\r\n                        <button onClick={uploadHandler} type=\"submit\" className=\"btn green waves-effect waves-light\">Загрузить</button>\r\n                    </div>\r\n                   \r\n                           \r\n                    </div>\r\n                </form>               \r\n            </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\nexport default Upload"]},"metadata":{},"sourceType":"module"}