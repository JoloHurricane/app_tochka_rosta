{"ast":null,"code":"import _objectSpread from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useState}from'react';import FollowSection from\"../components/FollowSection\";import Gallery from\"../components/Gallery\";import IconBoxes from\"../components/IconBoxes\";import{Loader}from'../components/Loader';import Slider from\"../components/Slider\";import{AuthContext}from'../context/AuthContext';import{useHttp}from'../hooks/http.hook';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request,loading=_useHttp.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),images=_useState2[0],setImages=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),articles=_useState4[0],setArticles=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),category=_useState6[0],setCategory=_useState6[1];var _useState7=useState({title:'',address:'',phone:'',phoneAdditional:'',email:'',_id:'',city:'',map:'',vk:'',instagram:'',facebook:'',telegram:''}),_useState8=_slicedToArray(_useState7,2),organization=_useState8[0],setOrganization=_useState8[1];useEffect(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _category,fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request(\"/api/galleryCategory-edit/gallery-category\",'GET',null);case 3:_category=_context.sent;setCategory(_category);_context.next=7;return request(\"/api/galleryCategory-edit/images-limit\",'POST',{catId:_category._id,limit:30},{},'application/json');case 7:fetched=_context.sent;setImages(fetched);_context.next=13;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);})),[request]);var fetchArticles=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var limit,fetched;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;limit=5;_context2.next=4;return request('/api/articles-edit/articles-limit','POST',{limit:limit},{},'application/json');case 4:fetched=_context2.sent;setArticles(fetched);_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);})),[request]);useEffect(function(){fetchArticles();},[fetchArticles]);var fetchOrg=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var fetched;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return request('/api/organization-edit/organization','POST',_objectSpread({},organization),{},'application/json');case 3:fetched=_context3.sent;setOrganization(_objectSpread({},fetched));_context3.next=9;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);})),[request]);useEffect(function(){fetchOrg();},[fetchOrg]);if(loading){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Slider,{articles:articles}),/*#__PURE__*/_jsx(IconBoxes,{}),/*#__PURE__*/_jsx(FollowSection,{organization:organization}),category!==null&&/*#__PURE__*/_jsx(Gallery,{additionalClass:\"center\",images:images,title:category.title,titleSection:\"\\u0424\\u043E\\u0442\\u043E \\u0433\\u0430\\u043B\\u0435\\u0440\\u0435\\u044F\"})]});}export default Home;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/Pages/Home.js"],"names":["React","useCallback","useContext","useEffect","useState","FollowSection","Gallery","IconBoxes","Loader","Slider","AuthContext","useHttp","Home","auth","request","loading","images","setImages","articles","setArticles","category","setCategory","title","address","phone","phoneAdditional","email","_id","city","map","vk","instagram","facebook","telegram","organization","setOrganization","catId","limit","fetched","fetchArticles","fetchOrg"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react'\r\nimport FollowSection from \"../components/FollowSection\"\r\nimport Gallery from \"../components/Gallery\"\r\nimport IconBoxes from \"../components/IconBoxes\"\r\nimport { Loader } from '../components/Loader'\r\nimport Slider from \"../components/Slider\"\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport { useHttp } from '../hooks/http.hook'\r\n\r\n\r\nfunction Home(){\r\n     const auth = useContext(AuthContext)\r\n    const {request, loading} = useHttp()\r\n    const [images,setImages] = useState([])\r\n    const [articles, setArticles] = useState([])\r\n    const [category,setCategory] = useState({})\r\n    const [organization,setOrganization] = useState({\r\n      title:'',\r\n      address:'',\r\n      phone:'',\r\n      phoneAdditional:'',\r\n      email:'',\r\n      _id:'',\r\n      city:'',\r\n      map:'',\r\n      vk:'',\r\n      instagram:'',\r\n      facebook:'',\r\n      telegram:''\r\n    })\r\n\r\n    useEffect(  async() => {\r\n        \r\n      try {\r\n          const category  = await request(`/api/galleryCategory-edit/gallery-category`, 'GET', null)\r\n          setCategory(category)\r\n          const fetched = await request(`/api/galleryCategory-edit/images-limit`, 'POST', \r\n          {catId:category._id,limit:30},  {},'application/json')\r\n          setImages(fetched)\r\n             \r\n        } catch (e) {}\r\n    },[request])\r\n\r\n    const fetchArticles = useCallback(async () => {\r\n        try {\r\n          const limit = 5  \r\n          const fetched = await request('/api/articles-edit/articles-limit', 'POST', {limit:limit},\r\n          {},'application/json')\r\n          setArticles(fetched)\r\n        } catch (e) {}\r\n      }, [request])\r\n      useEffect(() => {\r\n        fetchArticles()\r\n       \r\n      }, [fetchArticles])\r\n\r\n      const fetchOrg = useCallback(async () => {\r\n        try {\r\n            const fetched = await request('/api/organization-edit/organization', \r\n            'POST', {...organization},{},'application/json')\r\n            \r\n            setOrganization({...fetched})\r\n            \r\n           \r\n    } catch (e) {}\r\n  }, [request])\r\n  \r\n  useEffect(() => {\r\n    fetchOrg()\r\n    \r\n  }, [fetchOrg]) \r\n  \r\n\r\n      if (loading) {\r\n        return <Loader/>\r\n      }\r\n\r\n    return(\r\n        <>\r\n        \r\n        <Slider articles={articles}/>\r\n        <IconBoxes/>\r\n        <FollowSection organization={organization}/>\r\n        {category!==null && <Gallery additionalClass={\"center\"} images={images} title={category.title} titleSection ='Фото галерея'/>}\r\n      \r\n        \r\n        </>\r\n\r\n    )\r\n}\r\n\r\nexport default Home;"]},"metadata":{},"sourceType":"module"}