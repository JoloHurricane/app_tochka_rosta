{"ast":null,"code":"import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback,useEffect}from\"react\";var storageName='userData';export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),ready=_useState4[0],setReady=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),userId=_useState6[0],setUserId=_useState6[1];var login=useCallback(function(jwtToken,id){setToken(jwtToken);setUserId(userId);localStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken}));},[]);var logout=useCallback(function(){setToken(null);setUserId(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.userId);}setReady(true);},[login]);return{login:login,logout:logout,token:token,userId:userId,ready:ready};};","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/hooks/auth.hook.js"],"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","ready","setReady","userId","setUserId","login","jwtToken","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":"wHAAA,OAAQA,QAAR,CAAkBC,WAAlB,CAA8BC,SAA9B,KAA8C,OAA9C,CAEA,GAAMC,CAAAA,WAAW,CAAG,UAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAI,eAEEJ,QAAQ,CAAC,IAAD,CAFV,wCAEhBK,KAFgB,eAEVC,QAFU,8BAGGN,QAAQ,CAAC,KAAD,CAHX,yCAGhBO,KAHgB,eAGTC,QAHS,8BAIKR,QAAQ,CAAC,IAAD,CAJb,yCAIhBS,MAJgB,eAIRC,SAJQ,eAMvB,GAAMC,CAAAA,KAAK,CAAGV,WAAW,CAAC,SAACW,QAAD,CAAUC,EAAV,CAAe,CACrCP,QAAQ,CAACM,QAAD,CAAR,CACAF,SAAS,CAACD,MAAD,CAAT,CACAK,YAAY,CAACC,OAAb,CAAqBZ,WAArB,CAAkCa,IAAI,CAACC,SAAL,CAAe,CAC7CR,MAAM,CAACI,EADsC,CAClCR,KAAK,CAACO,QAD4B,CAAf,CAAlC,EAGH,CANwB,CAMvB,EANuB,CAAzB,CAQA,GAAMM,CAAAA,MAAM,CAAGjB,WAAW,CAAC,UAAI,CAC3BK,QAAQ,CAAC,IAAD,CAAR,CACAI,SAAS,CAAC,IAAD,CAAT,CACAI,YAAY,CAACK,UAAb,CAAwBhB,WAAxB,EACH,CAJyB,CAIxB,EAJwB,CAA1B,CAMAD,SAAS,CAAC,UAAI,CACV,GAAMkB,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAYP,YAAY,CAACQ,OAAb,CAAqBnB,WAArB,CAAZ,CAAb,CACA,GAAIiB,IAAI,EAAIA,IAAI,CAACf,KAAjB,CAAwB,CACpBM,KAAK,CAACS,IAAI,CAACf,KAAN,CAAae,IAAI,CAACX,MAAlB,CAAL,CACH,CACDD,QAAQ,CAAC,IAAD,CAAR,CAEH,CAPQ,CAOP,CAACG,KAAD,CAPO,CAAT,CASA,MAAO,CAACA,KAAK,CAALA,KAAD,CAAQO,MAAM,CAANA,MAAR,CAAeb,KAAK,CAALA,KAAf,CAAqBI,MAAM,CAANA,MAArB,CAA4BF,KAAK,CAALA,KAA5B,CAAP,CACH,CA9BM","sourcesContent":["import {useState, useCallback,useEffect} from \"react\"\r\n\r\nconst storageName = 'userData'\r\n\r\nexport const useAuth = ()=>{\r\n\r\n    const [token,setToken] = useState(null)\r\n    const [ready, setReady] = useState(false)\r\n    const [userId, setUserId] = useState(null)\r\n\r\n    const login = useCallback((jwtToken,id)=>{\r\n        setToken(jwtToken)\r\n        setUserId(userId)\r\n        localStorage.setItem(storageName, JSON.stringify({\r\n            userId:id, token:jwtToken\r\n        }))\r\n    },[])\r\n\r\n    const logout = useCallback(()=>{\r\n        setToken(null)\r\n        setUserId(null)\r\n        localStorage.removeItem(storageName)\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n        const data = JSON.parse( localStorage.getItem(storageName))\r\n        if (data && data.token) {\r\n            login(data.token, data.userId)\r\n        } \r\n        setReady(true)  \r\n\r\n    },[login])\r\n\r\n    return {login, logout,token,userId,ready}\r\n}"]},"metadata":{},"sourceType":"module"}