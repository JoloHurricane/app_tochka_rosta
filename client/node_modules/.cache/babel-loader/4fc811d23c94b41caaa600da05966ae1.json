{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState,useCallback}from\"react\";import{Link}from'react-router-dom';import DocumentCategoryFields from'./DocumentCategoryFields';import{AuthContext}from'../context/AuthContext';import{useHttp}from\"../hooks/http.hook\";import{useMessage}from\"../hooks/message.hook\";import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function EventsUpdate(){function submitHandler(event){event.preventDefault();}var eventId=useParams().id;var currentRoute=window.location.pathname;var auth=useContext(AuthContext);var message=useMessage();var _useHttp=useHttp(),loading=_useHttp.loading,error=_useHttp.error,request=_useHttp.request,clearError=_useHttp.clearError;var _useState=useState({title:'',createdAt:'',createdEnd:''}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];useEffect(function(){message(error);clearError();},[error,message,clearError]);var changeHandler=function changeHandler(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var fetchEvents=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request(\"/api/events-edit/events/\".concat(eventId),'GET',null);case 3:fetched=_context.sent;setForm(_objectSpread(_objectSpread({},form),fetched));_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[request]);useEffect(function(){window.M.updateTextFields();});useEffect(function(){fetchEvents();},[fetchEvents]);var updateHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return request(\"/api/events-edit/update/\".concat(eventId),'POST',_objectSpread({},form),{},'application/json');case 3:data=_context2.sent;message(data.message);_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function updateHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"adm-form col s12 m12\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,method:\"post\",enctype:\"multipart/form-data\",style:{paddingTop:\"40px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col offset-l2 s4\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"title\",name:\"title\",type:\"text\",class:\"\",value:form.title,onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{for:\"title\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s4 l2\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"date\",name:\"createdAt\",type:\"text\",class:\"\",value:form.createdAt,onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{for:\"date\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043D\\u0430\\u0447\\u0430\\u043B\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s4 l2\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"dateEnd\",name:\"createdEnd\",type:\"text\",class:\"\",value:form.createdEnd,onChange:changeHandler}),/*#__PURE__*/_jsx(\"label\",{for:\"dateEnd\",children:\"\\u0414\\u0430\\u0442\\u0430 \\u043A\\u043E\\u043D\\u0446\\u0430\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:updateHandler,type:\"submit\",className:\"btn blue waves-effect waves-light\",children:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"})})]})})})});}export default EventsUpdate;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/components/EventsUpdate.js"],"names":["React","useEffect","useContext","useState","useCallback","Link","DocumentCategoryFields","AuthContext","useHttp","useMessage","useParams","EventsUpdate","submitHandler","event","preventDefault","eventId","id","currentRoute","window","location","pathname","auth","message","loading","error","request","clearError","title","createdAt","createdEnd","form","setForm","changeHandler","e","target","name","value","fetchEvents","fetched","M","updateTextFields","updateHandler","data","paddingTop"],"mappings":"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","sourcesContent":["import React,{useEffect, useContext,useState,useCallback} from \"react\";\r\nimport {Link} from 'react-router-dom'\r\nimport DocumentCategoryFields from './DocumentCategoryFields'\r\nimport { AuthContext } from '../context/AuthContext'\r\nimport {useHttp} from \"../hooks/http.hook\" \r\nimport {useMessage} from \"../hooks/message.hook\"\r\nimport {useParams} from 'react-router-dom'\r\n\r\nfunction EventsUpdate(){\r\n    function submitHandler(event){\r\n        event.preventDefault()\r\n    }\r\n    const eventId = useParams().id\r\n    const currentRoute = window.location.pathname\r\n    const auth = useContext(AuthContext)\r\n    const message = useMessage()\r\n    const {loading,error,request,clearError} = useHttp()\r\n    const [form,setForm] = useState({\r\n      title:'',\r\n      createdAt:'',\r\n      createdEnd:''\r\n    \r\n      \r\n    }) \r\n\r\n        useEffect(()=>{\r\n            message(error)\r\n            clearError()\r\n          },[error,message,clearError])\r\n\r\n          const changeHandler = e=>{\r\n            setForm({...form, [e.target.name]: e.target.value})\r\n          }  \r\n\r\n          const fetchEvents = useCallback(async () => {\r\n            try {\r\n                  const fetched = await request(`/api/events-edit/events/${eventId}`, 'GET', null)\r\n             \r\n                  setForm({...form,...fetched})\r\n                  \r\n                 \r\n          } catch (e) {}\r\n        }, [request])\r\n        \r\n        useEffect(() => {\r\n          window.M.updateTextFields()\r\n        },)\r\n        useEffect(() => {\r\n          fetchEvents()\r\n          \r\n        }, [fetchEvents])\r\n    \r\n          const updateHandler= async ()=>{\r\n            try{\r\n             \r\n              const data=await request(`/api/events-edit/update/${eventId}`,'POST',{...form} , \r\n              {},'application/json')\r\n              message(data.message)\r\n              \r\n  \r\n            }catch(e){\r\n      \r\n            }\r\n        }\r\n    return(\r\n\r\n        <>\r\n         <div className=\"row\">\r\n            \r\n            <div className=\"adm-form col s12 m12\">\r\n           \r\n                <form onSubmit={submitHandler} method=\"post\" enctype=\"multipart/form-data\" style={{paddingTop:\"40px\"}}>\r\n                  <div className=\"input-field col offset-l2 s4\">\r\n                   <input id=\"title\" name=\"title\" type=\"text\" class=\"\" \r\n                      value={form.title} onChange={changeHandler}  />\r\n                    <label for=\"title\">Название</label>\r\n                  </div>\r\n                  <div className=\"input-field col s4 l2\">\r\n                    <input id=\"date\" name=\"createdAt\" type=\"text\" class=\"\" \r\n                        value={form.createdAt} onChange={changeHandler} />\r\n                      <label for=\"date\">Дата начала</label>\r\n                    </div> \r\n                  <div className=\"input-field col s4 l2\">\r\n                    <input id=\"dateEnd\" name=\"createdEnd\" type=\"text\" class=\"\" \r\n                          value={form.createdEnd} onChange={changeHandler}   />\r\n                      <label for=\"dateEnd\">Дата конца</label>\r\n                    </div> \r\n                  <div className=\"input-field col s2\">\r\n                  <button onClick={updateHandler}  type=\"submit\" className=\"btn blue waves-effect waves-light\">Обновить</button>\r\n                    </div>    \r\n                </form> \r\n\r\n            </div>\r\n     \r\n        </div>\r\n        </>\r\n    )\r\n\r\n\r\n}\r\n\r\n export default EventsUpdate;"]},"metadata":{},"sourceType":"module"}