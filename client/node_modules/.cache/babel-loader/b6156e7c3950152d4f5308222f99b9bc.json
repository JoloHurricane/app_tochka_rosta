{"ast":null,"code":"import _regeneratorRuntime from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/react projects/reactExpress/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useCallback,useContext,useEffect,useState}from\"react\";import GalleryCard from\"../components/GalleryCard\";import Pagination from'../components/Pagination';import{useHttp}from'../hooks/http.hook';import{Loader}from'../components/Loader';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GalleryPage(){var auth=useContext(AuthContext);var _useHttp=useHttp(),request=_useHttp.request,loading=_useHttp.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(15),_useState6=_slicedToArray(_useState5,2),countCategories=_useState6[0],setCountCategories=_useState6[1];var fetchCategories=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var fetched;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return request('/api/galleryCategory-edit/gallery-categories','GET',null);case 3:fetched=_context.sent;setCategories(fetched);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);})),[request]);useEffect(function(){window.M.updateTextFields();});useEffect(function(){fetchCategories();},[fetchCategories]);var indexLastCategory=currentPage*countCategories;var indexFirstCategory=indexLastCategory-countCategories;var currentCategory=categories.slice(indexFirstCategory,indexLastCategory);var paginate=function paginate(pageNumber){setCurrentPage(pageNumber);};var paginatePrev=function paginatePrev(pageNumber){if(currentPage!==1){setCurrentPage(pageNumber-1);}};var paginateNext=function paginateNext(pageNumber,lastIndex){if(pageNumber!==lastIndex){setCurrentPage(pageNumber+1);}};if(loading){return/*#__PURE__*/_jsx(Loader,{});}if(categories==false){return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u041F\\u043E\\u043A\\u0430 \\u043D\\u0435\\u0442 \\u0441\\u043E\\u0431\\u044B\\u0442\\u0438\\u0439, \\u043F\\u0435\\u0440\\u0435\\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u0435 \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\"})})});}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:!loading&&currentCategory.map(function(category,index){return/*#__PURE__*/_jsx(GalleryCard,{pathIMG:\"/images/galleryCategory/\".concat(category.img),title:category.title,description:category.description,link:\"/gallery/\".concat(category._id),linkAdm:\"/admpage/galleryCategory-update/\".concat(category._id)},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(Pagination,{loading:loading,countState:countCategories,totalState:categories.length,currentPage:currentPage,paginate:paginate,paginateNext:paginateNext,paginatePrev:paginatePrev})})]})});}export default GalleryPage;","map":{"version":3,"sources":["C:/react projects/reactExpress/client/src/Pages/GalleryPage.js"],"names":["React","useCallback","useContext","useEffect","useState","GalleryCard","Pagination","useHttp","Loader","AuthContext","GalleryPage","auth","request","loading","categories","setCategories","currentPage","setCurrentPage","countCategories","setCountCategories","fetchCategories","fetched","window","M","updateTextFields","indexLastCategory","indexFirstCategory","currentCategory","slice","paginate","pageNumber","paginatePrev","paginateNext","lastIndex","map","category","index","img","title","description","_id","length"],"mappings":"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","sourcesContent":["import React , {useCallback, useContext, useEffect, useState} from \"react\";\r\nimport GalleryCard from \"../components/GalleryCard\";\r\nimport Pagination from '../components/Pagination'\r\nimport {useHttp} from '../hooks/http.hook'\r\nimport {Loader} from '../components/Loader'\r\nimport { AuthContext } from '../context/AuthContext'\r\n\r\nfunction  GalleryPage() {\r\n    const auth = useContext(AuthContext)\r\n    const {request, loading} = useHttp()\r\n    const [categories, setCategories] = useState([])\r\n    const [currentPage,setCurrentPage]  = useState(1)\r\n    const [countCategories,setCountCategories] = useState(15)\r\n    \r\n\r\n\r\n    const fetchCategories = useCallback(async () => {\r\n        try {\r\n            const fetched = await request('/api/galleryCategory-edit/gallery-categories', 'GET', null)\r\n            setCategories(fetched)\r\n            \r\n    } catch (e) {}\r\n  }, [request])\r\n\r\n  useEffect(() => {\r\n    window.M.updateTextFields()\r\n  }, )\r\n  \r\n  useEffect(() => {\r\n    fetchCategories()\r\n  }, [fetchCategories])\r\n\r\n  const indexLastCategory = currentPage * countCategories\r\n  const indexFirstCategory = indexLastCategory - countCategories\r\n  const currentCategory = categories.slice(indexFirstCategory,indexLastCategory)\r\n\r\n  const paginate=(pageNumber)=>{setCurrentPage(pageNumber)}\r\n\r\n  const paginatePrev=(pageNumber)=>{\r\n    if (currentPage!==1){\r\n      setCurrentPage(pageNumber-1)\r\n      \r\n    }\r\n \r\n  }\r\n\r\n   \r\n  const paginateNext= (pageNumber,lastIndex) => {\r\n    if (pageNumber!==lastIndex){\r\n      setCurrentPage(pageNumber+1)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return <Loader/>\r\n  }\r\n\r\n  if(categories==false){\r\n    return(\r\n      <>\r\n      <div className=\"container\">\r\n        <h3>Пока нет событий, перезагрузите страницу</h3>\r\n      </div>\r\n      </>\r\n    )\r\n  }\r\n    return(\r\n\r\n        <>\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                  \r\n                   {!loading && currentCategory.map((category,index)=>{\r\n                    return(\r\n                      <GalleryCard key={index} pathIMG={`/images/galleryCategory/${category.img}`} title={category.title} \r\n                      description={category.description} \r\n                      link={`/gallery/${category._id}`}\r\n                      linkAdm={`/admpage/galleryCategory-update/${category._id}`}/>\r\n                    )\r\n                  })}\r\n                </div>\r\n                <div className=\"row\">\r\n                  <Pagination \r\n                  loading={loading} \r\n                  countState={countCategories} \r\n                  totalState={categories.length} \r\n                  currentPage={currentPage} \r\n                  paginate={paginate}\r\n                  paginateNext={paginateNext}\r\n                  paginatePrev={paginatePrev}/>\r\n                      \r\n                  </div>\r\n            </div>\r\n        </>\r\n    )\r\n    \r\n}\r\n\r\nexport default GalleryPage"]},"metadata":{},"sourceType":"module"}